
# ①通过LSTM处理20年NDVI数据
# 1. 加载CSV数据
# 2. 查看数据的前几行
# 3. 第一列是栅格ID，剩余列是每个月的NDVI数据
# 4. 转换为numpy数组以供LSTM使用
# 5. 将数据转换为适合LSTM输入的三维格式：(样本数, 时间步长, 特征数)
# 6. 查看数据的形状
# 构建 LSTM 模型
# 8. 编译模型，使用Adam优化器和均方误差损失函数
# 9. 训练LSTM模型
# 在这里，目标是生成时序特征，只是训练网络以学习时序特征
# 10. 获取LSTM层的时序特征
# 为了获取时序特征，我们可以通过以下方式从LSTM层输出特征
# 获取每个栅格的时序特征
# 查看输出的特征形状
# 将时序特征保存到 CSV 文件

# ②将①中结果表格输入DNN，同时输入地理空间栅格属性特征数据
# 1. 加载数据
# 2. 合并栅格特征数据和标签数据
# 3. 合并DNN数据和LSTM数据，按UID合并
# 4. 提取特征和标签
# 5. 数据标准化
# 6. 划分训练集和测试集
# 7. 定义DNN模型，增加多层数和神经元
# 8. 编译DNN模型，优化器使用Adam
# 9. 定义早停回调，避免过拟合
# 10. 训练模型
# 11. 在测试集上评估模型性能
# 12. 预测所有栅格的结果（包括已经是保护地的栅格）
# 13. 保存预测结果（包含保护地的概率以及最终预测值）
# 14. 保存训练好的模型


# ③生成栅格空间权重关系矩阵
# 1. 读取邻接矩阵（DBF 文件）
# 转换为 pandas DataFrame
# 2. 读取阻力面数据（DBF 文件）
# 3. 创建 UID 到阻力值的字典映射
# 4. 获取栅格数量（栅格的 UID 总数）
# 5.创建一个空的稀疏矩阵（LIL 格式）
# 6. 遍历邻接矩阵的每个连接（UID 和 JOIN_FID）
# 7. 将 LIL 格式转换为 CSR 格式（稀疏矩阵）
# 8. 修改无栅格数据
# 9. 将调整后的矩阵转换为 CSR 格式
# 10. 保存调整后的矩阵为稀疏矩阵 .npz 文件


# ④将③栅格空间权重关系矩阵纳入GAT拓扑层
# 1. 加载稀疏邻接矩阵
# 2. 稀疏矩阵的组件
# 3. 加载栅格特征数据
# 4. 加载标签数据
# 5. 构建图数据
# 6. 强化邻接区域的特征权重，增强邻接栅格的影响力
# 7. 构建数据对象
# 8. 定义GAT模型，增加深度和头数
# 9. 权重初始化
# 10. 定义训练过程
# 11. 初始化模型权重
# 12. 使用Adam优化器，调整学习率
# 13. 模型训练
# 14.  模型评估与预测
# 15.  输出结果调整，给每个结果加上0.5
# 16. 保存预测结果为表格
# 17. 保存为CSV文件

# 将LiDNN以及GAT通过单层堆叠融合
# 1. 加载数据
# 2. 合并数据，按UID对齐x
# 3. 提取DNN和GAT模型的预测概率
# 4. 提取标签数据
# 5. 创建新的特征矩阵，将DNN和GAT的预测结果作为特征
# 6. 数据标准化
# 7. 使用SMOTE进行过采样，平衡数据集
# 8. 划分训练集和测试集
# 9. 定义XGBoost模型
# 10. 保存优化后的预测结果

